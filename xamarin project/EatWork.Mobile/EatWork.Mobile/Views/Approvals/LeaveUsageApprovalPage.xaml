<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="EatWork.Mobile.Views.Approvals.LeaveUsageApprovalPage"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:border="clr-namespace:Syncfusion.XForms.Border;assembly=Syncfusion.Core.XForms"
             xmlns:busyindicator="clr-namespace:Syncfusion.SfBusyIndicator.XForms;assembly=Syncfusion.SfBusyIndicator.XForms"
             xmlns:buttons="clr-namespace:Syncfusion.XForms.Buttons;assembly=Syncfusion.Buttons.XForms"
             xmlns:cards="clr-namespace:Syncfusion.XForms.Cards;assembly=Syncfusion.Cards.XForms"
             xmlns:converter="clr-namespace:EatWork.Mobile.Utils"
             xmlns:d="http://xamarin.com/schemas/2014/forms/design"
             xmlns:iconize="clr-namespace:Plugin.Iconize;assembly=Plugin.Iconize"
             xmlns:local="clr-namespace:EatWork.Mobile.Views.Shared"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:syncfusion="clr-namespace:Syncfusion.ListView.XForms;assembly=Syncfusion.SfListView.XForms"
             Title="Leave Usage"
             Style="{StaticResource ContentPage}"
             mc:Ignorable="d">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converter:TextToBoolConverter x:Key="TextToBoolConverter" />
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles.xaml" />
                <ResourceDictionary Source="../Shared/ListHeaderPage.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ContentPage.ToolbarItems>
        <!--<iconize:IconToolbarItem Icon="md-close" Command="{Binding CloseModalCommand}" Priority="0" IconColor="{StaticResource IconizeToolbarItemColor}" />-->
    </ContentPage.ToolbarItems>

    <ContentPage.Content>
        <AbsoluteLayout HorizontalOptions="FillAndExpand"
                        VerticalOptions="FillAndExpand">
            <busyindicator:SfBusyIndicator x:Name="busyindicator"
                                           IsBusy="{Binding IsBusy}"
                                           Style="{StaticResource BusyIndicatorStyle}" />

            <StackLayout AbsoluteLayout.LayoutBounds="0.5,0.5,-1,-1"
                         AbsoluteLayout.LayoutFlags="PositionProportional"
                         IsVisible="{Binding IsBusy, Converter={converter:InverseBoolConverter}}">

                <local:NoItemsPartialPage DetailsText="No items available to display."
                                          IsVisible="{Binding LeaveUsageList, Converter={converter:ListToBoolConverter}}" />
            </StackLayout>

            <Grid AbsoluteLayout.LayoutBounds="0,0,1,1"
                  AbsoluteLayout.LayoutFlags="All"
                  ColumnSpacing="0"
                  IsVisible="{Binding LeaveUsageList, Converter={converter:ListToInverseBoolConverter}}"
                  RowSpacing="0">
                <Grid.RowDefinitions>
                    <!--<RowDefinition Height="Auto" />
                         <RowDefinition Height="Auto" />-->
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <StackLayout Grid.Row="0"
                             Margin="10,10"
                             Spacing="0">

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>

                        <Label Grid.Column="0"
                               FontFamily="{DynamicResource Bold}"
                               FontSize="20"
                               HorizontalOptions="Start"
                               Text="Leave Usage"
                               TextColor="{DynamicResource Gray-900}" />

                        <buttons:SfButton x:Name="SkipButton"
                                          Grid.Column="1"
                                          BackgroundColor="Transparent"
                                          Command="{Binding CloseModalCommand}"
                                          CornerRadius="20"
                                          FontFamily="{DynamicResource SemiBold}"
                                          HeightRequest="40"
                                          HorizontalOptions="End"
                                          Text="Close"
                                          TextColor="{x:StaticResource HyperLink}"
                                          VerticalOptions="StartAndExpand"
                                          WidthRequest="80" />
                    </Grid>

                    <Grid Margin="0,20,0,0"
                          ColumnSpacing="0"
                          IsVisible="{Binding IsBusy, Converter={converter:InverseBoolConverter}}"
                          RowSpacing="0">

                        <syncfusion:SfListView x:Name="LeaveUsageListView"
                                               AutoFitMode="Height"
                                               IsVisible="{Binding DisplayUsageList}"
                                               ItemSpacing="0,0,0,1"
                                               ItemsSource="{Binding LeaveUsageList}"
                                               LoadMoreOption="AutoOnScroll"
                                               SelectionMode="None"
                                               TapCommand="{Binding ViewLeaveUsageItemCommand}">

                            <syncfusion:SfListView.ItemTemplate>
                                <DataTemplate>
                                    <ViewCell>
                                        <ViewCell.View>
                                            <Grid Margin="1"
                                                  Padding="2">
                                                <Frame x:Name="frame"
                                                       Margin="1"
                                                       BackgroundColor="{StaticResource Gray-White}"
                                                       CornerRadius="10"
                                                       HasShadow="True">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>

                                                        <Grid Padding="10,0,10,0"
                                                              RowSpacing="1"
                                                              VerticalOptions="Start">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                            </Grid.RowDefinitions>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*" />
                                                                <ColumnDefinition Width="*" />
                                                            </Grid.ColumnDefinitions>

                                                            <!--<Label Text="{Binding TransactionType}"
                                                                 Grid.Row="0" Grid.Column="0"
                                                                 Style="{DynamicResource ListItemTextStyle}"
                                                                 FontSize="Medium"
                                                                 TextColor="Black"
                                                                 HorizontalOptions="StartAndExpand"
                                                                 FontAttributes="Bold"
                                                                 FontFamily="Calibri.ttf#Calibri" />-->

                                                            <Label Grid.Row="0"
                                                                   Grid.Column="0"
                                                                   HorizontalOptions="StartAndExpand"
                                                                   LineBreakMode="TailTruncation"
                                                                   Style="{StaticResource ListItemTextStyle}"
                                                                   Text="{Binding LeaveTypeSetup}" />

                                                            <border:SfBorder Grid.Row="0"
                                                                             Grid.Column="1"
                                                                             Padding="0"
                                                                             BorderColor="Transparent"
                                                                             HasShadow="False"
                                                                             HeightRequest="24"
                                                                             HorizontalOptions="Start"
                                                                             WidthRequest="150">
                                                                <border:SfBorder.Content>
                                                                    <Grid>
                                                                        <BoxView BackgroundColor="{Binding Status, Converter={converter:StatusColorConverter}}"
                                                                                 Opacity="0.07" />

                                                                        <Label FontFamily="{DynamicResource SemiBold}"
                                                                               FontSize="12"
                                                                               HorizontalOptions="CenterAndExpand"
                                                                               Text="{Binding Status}"
                                                                               TextColor="{Binding Status, Converter={converter:StatusColorConverter}}"
                                                                               VerticalOptions="Center" />
                                                                    </Grid>
                                                                </border:SfBorder.Content>
                                                            </border:SfBorder>

                                                            <StackLayout Grid.Row="1"
                                                                         Grid.ColumnSpan="1">
                                                                <Label HorizontalOptions="StartAndExpand"
                                                                       LineBreakMode="TailTruncation"
                                                                       Style="{StaticResource ListItemDetailTextStyle}"
                                                                       Text="{Binding InclusiveDate}" />
                                                                <!--<Grid>
                                                                     <Grid.RowDefinitions>
                                                                     <RowDefinition Height="*" />
                                                                     </Grid.RowDefinitions>
                                                                     <StackLayout Padding="0,3,0,0">
                                                                     <iconize:IconImage Icon="{StaticResource DateIcon}"
                                                                     WidthRequest="25"
                                                                     HeightRequest="15"
                                                                     IconColor="{DynamicResource PrimaryColor}"
                                                                     HorizontalOptions="StartAndExpand"
                                                                     VerticalOptions="CenterAndExpand" />
                                                                     </StackLayout>
                                                                     <StackLayout Padding="25,3,0,0">
                                                                     </StackLayout>
                                                                     </Grid>-->
                                                            </StackLayout>

                                                            <StackLayout Grid.Row="2"
                                                                         Grid.ColumnSpan="1">
                                                                <Grid>
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="*" />
                                                                    </Grid.RowDefinitions>
                                                                    <StackLayout Padding="0,5,0,0">
                                                                        <iconize:IconImage HeightRequest="15"
                                                                                           HorizontalOptions="StartAndExpand"
                                                                                           Icon="{StaticResource HourIcon}"
                                                                                           IconColor="{DynamicResource PrimaryColor}"
                                                                                           VerticalOptions="CenterAndExpand"
                                                                                           WidthRequest="25" />
                                                                    </StackLayout>
                                                                    <StackLayout Padding="25,5,0,0">
                                                                        <Label HorizontalOptions="StartAndExpand"
                                                                               LineBreakMode="NoWrap"
                                                                               Style="{StaticResource ListItemDetailTextStyle}"
                                                                               Text="{Binding LeaveRequestDisplay}" />
                                                                    </StackLayout>
                                                                </Grid>
                                                            </StackLayout>

                                                            <StackLayout Grid.Row="3"
                                                                         Grid.Column="0">
                                                                <Grid>
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="*" />
                                                                    </Grid.RowDefinitions>
                                                                    <StackLayout Padding="0,10,0,0">
                                                                        <iconize:IconImage HeightRequest="15"
                                                                                           HorizontalOptions="StartAndExpand"
                                                                                           Icon="{StaticResource ReasonIcon}"
                                                                                           IconColor="{DynamicResource PrimaryColor}"
                                                                                           VerticalOptions="CenterAndExpand"
                                                                                           WidthRequest="25" />
                                                                    </StackLayout>
                                                                    <StackLayout Padding="25,10,0,0">
                                                                        <Label HorizontalOptions="StartAndExpand"
                                                                               LineBreakMode="NoWrap"
                                                                               Style="{StaticResource ListItemDetailTextStyle}"
                                                                               Text="{Binding Reason}" />
                                                                    </StackLayout>
                                                                </Grid>
                                                            </StackLayout>

                                                            <!--  {Binding IsVisible,Mode=TwoWay}  -->
                                                            <Grid Grid.Row="4"
                                                                  Grid.ColumnSpan="2"
                                                                  Padding="0,20,0,0"
                                                                  IsVisible="False"
                                                                  RowSpacing="1"
                                                                  VerticalOptions="Start">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="*" />
                                                                    <RowDefinition Height="*" />
                                                                    <!--<RowDefinition Height="*" />-->
                                                                </Grid.RowDefinitions>

                                                                <cards:SfCardView Grid.Row="0"
                                                                                  MinimumHeightRequest="60">
                                                                    <Grid>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="120" />
                                                                            <ColumnDefinition Width="10" />
                                                                            <ColumnDefinition Width="*" />
                                                                        </Grid.ColumnDefinitions>
                                                                        <!--<Grid.RowDefinitions>
                                                                             <RowDefinition Height="*" />
                                                                             </Grid.RowDefinitions>-->
                                                                        <StackLayout Style="{StaticResource StcklytApprovalDetail}">
                                                                            <Label Style="{StaticResource lblApprovals}"
                                                                                   Text="Partial Leave?" />
                                                                        </StackLayout>
                                                                        <StackLayout Style="{StaticResource StcklytApprovals2}">
                                                                            <Label FontSize="Small"
                                                                                   Text="{Binding IsPartialDay}"
                                                                                   TextColor="Black" />
                                                                        </StackLayout>
                                                                    </Grid>
                                                                </cards:SfCardView>

                                                                <cards:SfCardView Grid.Row="1"
                                                                                  MinimumHeightRequest="50">
                                                                    <Grid RowSpacing="2">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="120" />
                                                                            <ColumnDefinition Width="10" />
                                                                            <ColumnDefinition Width="*" />
                                                                        </Grid.ColumnDefinitions>
                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition Height="*" />
                                                                        </Grid.RowDefinitions>
                                                                        <StackLayout Style="{StaticResource StcklytApprovalDetail}">
                                                                            <Label Style="{StaticResource lblApprovals}"
                                                                                   Text="Apply To" />
                                                                        </StackLayout>
                                                                        <StackLayout Style="{StaticResource StcklytApprovals2}">
                                                                            <Label FontSize="Small"
                                                                                   Text="{Binding ApplyTo}"
                                                                                   TextColor="Black" />
                                                                        </StackLayout>
                                                                    </Grid>
                                                                </cards:SfCardView>

                                                                <!--<cards:SfCardView Grid.Row="2" MinimumHeightRequest="50">
                                                                     <Grid RowSpacing="2">
                                                                     <Grid.ColumnDefinitions>
                                                                     <ColumnDefinition Width="120" />
                                                                     <ColumnDefinition Width="10" />
                                                                     <ColumnDefinition Width="*" />
                                                                     </Grid.ColumnDefinitions>
                                                                     <Grid.RowDefinitions>
                                                                     <RowDefinition Height="Auto" />
                                                                     </Grid.RowDefinitions>
                                                                     <StackLayout Grid.Column="0" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" BackgroundColor="{StaticResource Gray}">
                                                                     <Label Text="Reason"
                                                                     Style="{StaticResource lblApprovals}" />
                                                                     </StackLayout>
                                                                     <StackLayout Grid.Column="2" Padding="5" HorizontalOptions="FillAndExpand" VerticalOptions="CenterAndExpand">
                                                                     <Label Text="{Binding Reason}" FontSize="Small" TextColor="Black" />
                                                                     </StackLayout>
                                                                     </Grid>
                                                                     </cards:SfCardView>-->
                                                            </Grid>
                                                        </Grid>
                                                    </Grid>
                                                </Frame>
                                            </Grid>
                                        </ViewCell.View>
                                    </ViewCell>
                                </DataTemplate>
                            </syncfusion:SfListView.ItemTemplate>
                        </syncfusion:SfListView>
                    </Grid>
                </StackLayout>
            </Grid>
        </AbsoluteLayout>
    </ContentPage.Content>
</ContentPage>