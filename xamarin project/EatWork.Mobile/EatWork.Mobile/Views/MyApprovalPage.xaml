<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="EatWork.Mobile.Views.MyApprovalPage"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:busyindicator="clr-namespace:Syncfusion.SfBusyIndicator.XForms;assembly=Syncfusion.SfBusyIndicator.XForms"
             xmlns:buttons="clr-namespace:Syncfusion.XForms.Buttons;assembly=Syncfusion.Buttons.XForms"
             xmlns:control="clr-namespace:Syncfusion.XForms.TextInputLayout;assembly=Syncfusion.Core.XForms"
             xmlns:converter="clr-namespace:EatWork.Mobile.Utils"
             xmlns:custom="clr-namespace:ImageCircle.Forms.Plugin.Abstractions;assembly=ImageCircle.Forms.Plugin"
             xmlns:d="http://xamarin.com/schemas/2014/forms/design"
             xmlns:effect="clr-namespace:EatWork.Mobile.Utils.Effects"
             xmlns:gradient="clr-namespace:Syncfusion.XForms.Graphics;assembly=Syncfusion.Core.XForms"
             xmlns:iconize="clr-namespace:Plugin.Iconize;assembly=Plugin.Iconize"
             xmlns:local="clr-namespace:EatWork.Mobile.Views.Shared"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:sfPopup="clr-namespace:Syncfusion.XForms.PopupLayout;assembly=Syncfusion.SfPopupLayout.XForms"
             xmlns:syncfusion="clr-namespace:Syncfusion.ListView.XForms;assembly=Syncfusion.SfListView.XForms"
             xmlns:template="clr-namespace:EatWork.Mobile.Views.Template"
             x:Name="page"
             Title="My Approvals"
             Style="{StaticResource ContentPageNoiOSSafeArea}"
             mc:Ignorable="d">

    <ContentPage.Resources>
        <ResourceDictionary>
            <converter:CustomConverter x:Key="EventArgs" />
            <converter:TextToBoolConverter x:Key="TextToBoolConverter" />
            <Style x:Key="listImageStyle"
                   TargetType="custom:CircleImage">
                <!--<Setter Property="Source" Value="profile.png" />-->
                <Setter Property="BorderColor" Value="White" />
                <Setter Property="BorderThickness" Value="0.5" />
                <Setter Property="Aspect" Value="AspectFill" />
            </Style>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Shared/ListHeaderPage.xaml" />
                <ResourceDictionary Source="Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ContentPage.Behaviors>
        <converter:EventToCommandBehavior Command="{Binding PageAppearingCommand}"
                                          EventName="Appearing" />
        <converter:EventToCommandBehavior Command="{Binding PageDisappearingCommand}"
                                          EventName="Disappearing" />
    </ContentPage.Behaviors>

    <Grid RowSpacing="0"
          Style="{DynamicResource TitleViewContent}">

        <gradient:SfGradientView Grid.Row="0"
                                 Style="{DynamicResource NavBarStyle}" />
        <ContentView>
            <ContentView.Effects>
                <effect:SafeAreaPaddingEffect />
            </ContentView.Effects>

            <converter:TitleView x:Name="TitleView"
                                 Title="My Approvals"
                                 TitleColor="{StaticResource Gray-White}">
                <converter:TitleView.LeadingView>

                    <iconize:IconButton x:Name="MenuIcon"
                                        Command="{Binding MenuButtonCommand}"
                                        Style="{StaticResource IconButtonStyle}"
                                        Text="{StaticResource HamburgerIcon}" />
                </converter:TitleView.LeadingView>
            </converter:TitleView>
        </ContentView>

        <StackLayout Grid.Row="2"
                     Spacing="0">
            <AbsoluteLayout HorizontalOptions="FillAndExpand"
                            VerticalOptions="FillAndExpand">

                <busyindicator:SfBusyIndicator x:Name="busyindicator"
                                               IsBusy="{Binding IsBusy}"
                                               Style="{StaticResource BusyIndicatorStyle}" />

                <StackLayout AbsoluteLayout.LayoutBounds="0.5,0.5,-1,-1"
                             AbsoluteLayout.LayoutFlags="PositionProportional"
                             HorizontalOptions="CenterAndExpand"
                             IsVisible="{Binding IsBusy, Converter={converter:InverseBoolConverter}}"
                             VerticalOptions="CenterAndExpand">

                    <local:NoItemsPartialPage Margin="0,0"
                                              DetailsText="No items available to display."
                                              HorizontalOptions="CenterAndExpand"
                                              IsVisible="{Binding ShowList, Converter={converter:InverseBoolConverter}}"
                                              VerticalOptions="CenterAndExpand" />

                    <local:NoItemsPartialPage Margin="0,0"
                                              DetailsText="Please try again with different keywords/criteria."
                                              HorizontalOptions="CenterAndExpand"
                                              IsVisible="{Binding NoItems}"
                                              TitleText="No Result Found"
                                              VerticalOptions="CenterAndExpand" />
                </StackLayout>

                <Grid AbsoluteLayout.LayoutBounds="0,0,1,1"
                      AbsoluteLayout.LayoutFlags="All"
                      HorizontalOptions="FillAndExpand"
                      IsVisible="{Binding IsBusy, Converter={converter:InverseBoolConverter}}"
                      VerticalOptions="FillAndExpand">
                    <Grid.RowDefinitions>
                        <!--<RowDefinition Height="45" />-->
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <sfPopup:SfPopupLayout x:Name="popupLayout"
                                           HorizontalOptions="CenterAndExpand"
                                           IsOpen="{Binding DisplayFilter}"
                                           VerticalOptions="CenterAndExpand">
                        <sfPopup:SfPopupLayout.PopupView>
                            <sfPopup:PopupView AcceptButtonText="Filter"
                                               AcceptCommand="{Binding FilterTypeCommand}"
                                               AppearanceMode="TwoButton"
                                               DeclineButtonText="Reset"
                                               DeclineCommand="{Binding ResetFilteredTypeCommand}"
                                               ShowFooter="True"
                                               Style="{StaticResource SfPopupStyle}">

                                <sfPopup:PopupView.HeaderTemplate>
                                    <DataTemplate>
                                        <StackLayout>
                                            <ContentView>
                                                <ContentView.Effects>
                                                    <effect:SafeAreaPaddingEffect />
                                                </ContentView.Effects>

                                                <Grid Margin="10,10">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="80" />
                                                    </Grid.ColumnDefinitions>

                                                    <Label Grid.Column="0"
                                                           FontFamily="{DynamicResource Bold}"
                                                           FontSize="20"
                                                           HorizontalOptions="Start"
                                                           Text="Filters"
                                                           TextColor="{DynamicResource Gray-900}" />

                                                    <buttons:SfButton x:Name="SkipButton"
                                                                      Grid.Column="1"
                                                                      BackgroundColor="Transparent"
                                                                      Command="{Binding OpenFilterCommand}"
                                                                      CornerRadius="20"
                                                                      FontFamily="{DynamicResource SemiBold}"
                                                                      HeightRequest="40"
                                                                      HorizontalOptions="End"
                                                                      Text="Close"
                                                                      TextColor="{x:StaticResource HyperLink}"
                                                                      VerticalOptions="StartAndExpand"
                                                                      WidthRequest="80" />
                                                </Grid>
                                            </ContentView>
                                        </StackLayout>
                                    </DataTemplate>
                                </sfPopup:PopupView.HeaderTemplate>

                                <sfPopup:PopupView.ContentTemplate>
                                    <DataTemplate>
                                        <ScrollView>
                                            <StackLayout Padding="16,0"
                                                         BackgroundColor="{DynamicResource Gray-White}"
                                                         Spacing="0">
                                                <Label Margin="0,0,0,4"
                                                       FontFamily="{DynamicResource Medium}"
                                                       FontSize="12"
                                                       HeightRequest="18"
                                                       Text="Inclusive Dates"
                                                       TextColor="{DynamicResource Gray-800}" />

                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*" />
                                                    </Grid.RowDefinitions>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>

                                                    <StackLayout Grid.Row="0"
                                                                 Grid.Column="0">
                                                        <control:SfTextInputLayout Hint="Start Date  "
                                                                                   LeadingViewPosition="Inside"
                                                                                   Style="{StaticResource InputLayoutStyleWithIcon}">
                                                            <converter:NullableDatePicker x:Name="StartDate"
                                                                                          NullableDate="{Binding Holder.StartDate, Mode=TwoWay}"
                                                                                          Style="{StaticResource DatePickerStyle}" />
                                                            <control:SfTextInputLayout.HintLabelStyle>
                                                                <control:LabelStyle FontFamily="{DynamicResource Regular}"
                                                                                    FontSize="{StaticResource Smaller}" />
                                                            </control:SfTextInputLayout.HintLabelStyle>
                                                            <control:SfTextInputLayout.ErrorLabelStyle>
                                                                <control:LabelStyle FontFamily="{DynamicResource Regular}"
                                                                                    FontSize="{StaticResource Smaller}" />
                                                            </control:SfTextInputLayout.ErrorLabelStyle>
                                                            <control:SfTextInputLayout.LeadingView>
                                                                <iconize:IconLabel Style="{StaticResource IconizeIconStyle}"
                                                                                   Text="{StaticResource DateIcon}" />
                                                            </control:SfTextInputLayout.LeadingView>
                                                        </control:SfTextInputLayout>
                                                    </StackLayout>
                                                    <StackLayout Grid.Row="0"
                                                                 Grid.Column="1">
                                                        <control:SfTextInputLayout Hint="End Date  "
                                                                                   LeadingViewPosition="Inside"
                                                                                   Style="{StaticResource InputLayoutStyleWithIcon}">
                                                            <converter:NullableDatePicker x:Name="EndDate"
                                                                                          NullableDate="{Binding Holder.EndDate, Mode=TwoWay}"
                                                                                          Style="{StaticResource DatePickerStyle}" />
                                                            <control:SfTextInputLayout.HintLabelStyle>
                                                                <control:LabelStyle FontFamily="{DynamicResource Regular}"
                                                                                    FontSize="{StaticResource Smaller}" />
                                                            </control:SfTextInputLayout.HintLabelStyle>
                                                            <control:SfTextInputLayout.ErrorLabelStyle>
                                                                <control:LabelStyle FontFamily="{DynamicResource Regular}"
                                                                                    FontSize="{StaticResource Smaller}" />
                                                            </control:SfTextInputLayout.ErrorLabelStyle>
                                                            <control:SfTextInputLayout.LeadingView>
                                                                <iconize:IconLabel Style="{StaticResource IconizeIconStyle}"
                                                                                   Text="{StaticResource DateIcon}" />
                                                            </control:SfTextInputLayout.LeadingView>
                                                        </control:SfTextInputLayout>
                                                    </StackLayout>
                                                </Grid>

                                                <BoxView HeightRequest="{OnIdiom Default=1,
                                                                                 Desktop=0}"
                                                         Style="{StaticResource SeparatorStyle}" />

                                                <Label Margin="0,10,0,4"
                                                       FontFamily="{DynamicResource Medium}"
                                                       FontSize="12"
                                                       HeightRequest="18"
                                                       Text="Status"
                                                       TextColor="{DynamicResource Gray-800}" />

                                                <StackLayout x:Name="SelectableNameList"
                                                             BindableLayout.ItemsSource="{Binding Holder.StatusList}">
                                                    <BindableLayout.ItemTemplate>
                                                        <DataTemplate>
                                                            <Grid ColumnSpacing="0"
                                                                  RowSpacing="0">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto" />
                                                                </Grid.RowDefinitions>

                                                                <buttons:SfCheckBox Grid.Row="0"
                                                                                    Margin="0,0,0,0"
                                                                                    CornerRadius="2"
                                                                                    FontFamily="{DynamicResource Medium}"
                                                                                    FontSize="{DynamicResource Small}"
                                                                                    HeightRequest="48"
                                                                                    HorizontalOptions="Start"
                                                                                    IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                                                                    Text="{Binding DisplayText}"
                                                                                    TextColor="{DynamicResource Gray-900}"
                                                                                    UncheckedColor="{DynamicResource Gray-300}"
                                                                                    VerticalOptions="Center">

                                                                    <buttons:SfCheckBox.Behaviors>
                                                                        <converter:SfCheckBoxCommandBehavior Command="{Binding Path=BindingContext.SelectedStatusCommand, Source={x:Reference SelectableNameList}}"
                                                                                                             CommandParameter="{Binding .}"
                                                                                                             Converter="{StaticResource EventArgs}"
                                                                                                             EventName="StateChanged" />
                                                                    </buttons:SfCheckBox.Behaviors>
                                                                </buttons:SfCheckBox>
                                                            </Grid>
                                                        </DataTemplate>
                                                    </BindableLayout.ItemTemplate>
                                                </StackLayout>

                                                <BoxView HeightRequest="{OnIdiom Default=1,
                                                                                 Desktop=0}"
                                                         Style="{StaticResource SeparatorStyle}" />

                                                <Label Margin="0,10,0,4"
                                                       FontFamily="{DynamicResource Medium}"
                                                       FontSize="12"
                                                       HeightRequest="18"
                                                       Text="Transaction Types"
                                                       TextColor="{DynamicResource Gray-800}" />

                                                <StackLayout x:Name="SelectableNameList2"
                                                             BindableLayout.ItemsSource="{Binding SelectableListItemSource}">
                                                    <BindableLayout.ItemTemplate>
                                                        <DataTemplate>
                                                            <Grid ColumnSpacing="0"
                                                                  RowSpacing="0">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto" />
                                                                </Grid.RowDefinitions>

                                                                <buttons:SfCheckBox Grid.Row="0"
                                                                                    Margin="0,0,0,0"
                                                                                    CornerRadius="2"
                                                                                    FontFamily="{DynamicResource Medium}"
                                                                                    FontSize="{DynamicResource Small}"
                                                                                    HeightRequest="48"
                                                                                    HorizontalOptions="Start"
                                                                                    IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                                                                    Text="{Binding DisplayText}"
                                                                                    TextColor="{DynamicResource Gray-900}"
                                                                                    UncheckedColor="{DynamicResource Gray-300}"
                                                                                    VerticalOptions="Center">

                                                                    <buttons:SfCheckBox.Behaviors>
                                                                        <converter:SfCheckBoxCommandBehavior Command="{Binding Path=BindingContext.SelectedTransactionTypeCommand, Source={x:Reference SelectableNameList2}}"
                                                                                                             CommandParameter="{Binding .}"
                                                                                                             Converter="{StaticResource EventArgs}"
                                                                                                             EventName="StateChanged" />
                                                                    </buttons:SfCheckBox.Behaviors>
                                                                </buttons:SfCheckBox>
                                                            </Grid>
                                                        </DataTemplate>
                                                    </BindableLayout.ItemTemplate>
                                                </StackLayout>
                                            </StackLayout>
                                        </ScrollView>
                                    </DataTemplate>
                                </sfPopup:PopupView.ContentTemplate>

                                <sfPopup:PopupView.PopupStyle>
                                    <sfPopup:PopupStyle AcceptButtonTextColor="{DynamicResource PrimaryColor}"
                                                        DeclineButtonTextColor="{StaticResource Error}"
                                                        HeaderFontAttribute="Bold"
                                                        HeaderFontFamily="{StaticResource Medium}" />
                                </sfPopup:PopupView.PopupStyle>
                            </sfPopup:PopupView>
                        </sfPopup:SfPopupLayout.PopupView>
                    </sfPopup:SfPopupLayout>

                    <!--  HeaderTemplate="{StaticResource HeaderTemplateWithTransactionType}"  -->
                    <syncfusion:SfListView x:Name="ApprovalListView"
                                           HeaderSize="{OnPlatform Android=50,
                                                                   iOS=60,
                                                                   UWP=60}"
                                           HeaderTemplate="{StaticResource HeaderTemplateWithTransactionType}"
                                           IsBusy="{Binding IsBusy}"
                                           IsScrollBarVisible="False"
                                           IsStickyGroupHeader="False"
                                           IsStickyHeader="True"
                                           IsVisible="{Binding ShowList}"
                                           ItemSize="280"
                                           ItemSpacing="0,0"
                                           ItemsSource="{Binding Holder.MyApprovalList}"
                                           LoadMoreCommand="{Binding LoadItemsCommand}"
                                           LoadMoreCommandParameter="{Binding Source={x:Reference Name=ApprovalListView}}"
                                           LoadMoreOption="AutoOnScroll"
                                           SelectionMode="None"
                                           TapCommand="{Binding ViewItemCommand}">

                        <!--<syncfusion:SfListView.HeaderTemplate>
                             <DataTemplate>
                             <Grid Padding="0" Margin="0">

                             <Grid.ColumnDefinitions>
                             <ColumnDefinition Width="{OnIdiom Desktop=1*, Tablet=1*, Phone=1}" />
                             <ColumnDefinition Width="{OnIdiom Desktop=3*, Tablet=4*, Phone=*}" />
                             <ColumnDefinition Width="{OnIdiom Desktop=1*, Tablet=1*, Phone=1}" />
                             </Grid.ColumnDefinitions>

                             <StackLayout x:Name="Search2" IsVisible="False" />

                             <ScrollView Grid.Column="1">
                             <StackLayout BackgroundColor="Transparent"
                             HorizontalOptions="End"
                             Orientation="Horizontal"
                             Spacing="8"
                             VerticalOptions="Center">

                             <StackLayout IsVisible="{Binding ShowSearchField}" HorizontalOptions="Start" Margin="10,0,0,0" x:Name="Search">
                             <control:SfTextInputLayout LeadingViewPosition="Inside"
                             Style="{StaticResource searchLayoutStyle}">
                             <Entry FontSize="{StaticResource Smaller}"
                             Text="{Binding KeyWord,Mode=TwoWay}"
                             IsTextPredictionEnabled="True"
                             Placeholder="search here.."
                             HeightRequest="{OnPlatform Android=40,iOS=35,UWP=35}"
                             HorizontalOptions="Center"
                             WidthRequest="1000"
                             FontFamily="{DynamicResource Regular}"
                             ReturnCommand="{Binding SearchCommand}" />

                             <control:SfTextInputLayout.HintLabelStyle>
                             <control:LabelStyle FontSize="12" FontFamily="{DynamicResource Regular}" />
                             </control:SfTextInputLayout.HintLabelStyle>
                             <control:SfTextInputLayout.LeadingView>
                             <iconize:IconLabel Text="{StaticResource BackButtonIcon}" Style="{StaticResource IconizeIconStyle}">
                             <iconize:IconLabel.GestureRecognizers>
                             <TapGestureRecognizer Command="{Binding OpenSearchCommand}" />
                             </iconize:IconLabel.GestureRecognizers>
                             </iconize:IconLabel>
                             </control:SfTextInputLayout.LeadingView>
                             <control:SfTextInputLayout.TrailingView>
                             <iconize:IconLabel Text="{StaticResource CloseIcon}" Style="{StaticResource IconizeIconStyle}">
                             <iconize:IconLabel.GestureRecognizers>
                             <TapGestureRecognizer Command="{Binding ResetSearchCommand}" />
                             </iconize:IconLabel.GestureRecognizers>
                             </iconize:IconLabel>
                             </control:SfTextInputLayout.TrailingView>
                             </control:SfTextInputLayout>
                             </StackLayout>

                        -->
                        <!--  Search Button  -->
                        <!--
                             <buttons:SfButton Margin="0"
                             Padding="0"
                             Command="{Binding SearchCommand}"
                             CornerRadius="4"
                             HeightRequest="32"
                             Style="{StaticResource SfButtonStyle2}"
                             IsVisible="{Binding ShowSearchField}">
                             <buttons:SfButton.Content>
                             <StackLayout Padding="8,5,8,6"
                             Orientation="Horizontal"
                             Spacing="8"
                             VerticalOptions="Center">

                             <iconize:IconImage Icon="{StaticResource SearchIcon}"
                             HeightRequest="15"
                             WidthRequest="15"
                             HorizontalOptions="Center"
                             IconColor="{StaticResource Gray-700}"
                             VerticalOptions="Center" />
                             </StackLayout>
                             </buttons:SfButton.Content>
                             </buttons:SfButton>

                        -->
                        <!--  Show All  -->
                        <!--
                             <buttons:SfButton Margin="0"
                             Padding="0"
                             Command="{Binding ShowAllCommand}"
                             CornerRadius="4"
                             HeightRequest="32"
                             Style="{StaticResource SfButtonStyle2}"
                             IsVisible="{Binding ShowSearchField, Converter={converter:InverseBoolConverter}}">
                             <buttons:SfButton.Content>
                             <StackLayout Padding="8,5,8,6"
                             Orientation="Horizontal"
                             Spacing="8"
                             VerticalOptions="Center">

                             <iconize:IconImage Icon="{Binding Holder.ShowAllIcon}"
                             HeightRequest="15"
                             WidthRequest="15"
                             HorizontalOptions="Center"
                             IconColor="{StaticResource Gray-700}"
                             VerticalOptions="Center" />

                             <Label FontFamily="{DynamicResource SemiBold}"
                             Style="{StaticResource OptionButtonLabelStyle}"
                             Text="Show All"
                             VerticalTextAlignment="Center" />
                             </StackLayout>
                             </buttons:SfButton.Content>
                             </buttons:SfButton>

                        -->
                        <!--  Filter Transaction Types  -->
                        <!--
                             <buttons:SfButton Margin="0"
                             Padding="0"
                             Command="{Binding OpenFilterCommand}"
                             CornerRadius="4"
                             HeightRequest="32"
                             Style="{StaticResource SfButtonStyle2}"
                             IsVisible="{Binding ShowSearchField, Converter={converter:InverseBoolConverter}}">
                             <buttons:SfButton.Content>
                             <StackLayout Padding="8,5,8,6"
                             Orientation="Horizontal"
                             Spacing="8"
                             VerticalOptions="Center">

                             <iconize:IconImage Icon="{StaticResource FilterIcon}"
                             HeightRequest="15"
                             WidthRequest="15"
                             HorizontalOptions="Center"
                             IconColor="{StaticResource Gray-700}"
                             VerticalOptions="Center" />

                             <Label FontFamily="{DynamicResource SemiBold}"
                             Style="{StaticResource OptionButtonLabelStyle}"
                             Text="Filter"
                             VerticalTextAlignment="Center" />
                             </StackLayout>
                             </buttons:SfButton.Content>
                             </buttons:SfButton>

                        -->
                        <!--  Filter Button  -->
                        <!--
                             <buttons:SfButton Margin="0"
                             Padding="0"
                             Command="{Binding OpenSearchCommand}"
                             CommandParameter="{x:Reference Search}"
                             CornerRadius="4"
                             HeightRequest="32"
                             Style="{StaticResource SfButtonStyle2}"
                             IsVisible="{Binding ShowSearchField, Converter={converter:InverseBoolConverter}}">
                             <buttons:SfButton.Content>
                             <StackLayout Padding="8,5,8,6"
                             Orientation="Horizontal"
                             Spacing="8"
                             VerticalOptions="Center">

                             <iconize:IconImage Icon="{StaticResource SearchIcon}"
                             HeightRequest="15"
                             WidthRequest="15"
                             HorizontalOptions="Center"
                             IconColor="{StaticResource Gray-700}"
                             VerticalOptions="Center" />

                             <Label FontFamily="{DynamicResource SemiBold}"
                             Style="{StaticResource OptionButtonLabelStyle}"
                             Text="Search"
                             VerticalTextAlignment="Center" />
                             </StackLayout>
                             </buttons:SfButton.Content>
                             </buttons:SfButton>

                        -->
                        <!--  Sort Button  -->
                        <!--
                             <buttons:SfButton Command="{Binding SortCommand}"
                             CornerRadius="4"
                             Style="{StaticResource SfButtonStyle2}"
                             IsVisible="{Binding ShowSearchField, Converter={converter:InverseBoolConverter}}">
                             <buttons:SfButton.Content>
                             <StackLayout Padding="8,5,8,6"
                             Orientation="Horizontal"
                             Spacing="8">

                             <iconize:IconImage Icon="{StaticResource SortIcon}"
                             HeightRequest="15"
                             WidthRequest="15"
                             HorizontalOptions="Center"
                             IconColor="{StaticResource Gray-700}"
                             VerticalOptions="Center" />

                             <Label FontFamily="{DynamicResource SemiBold}"
                             Style="{StaticResource OptionButtonLabelStyle}"
                             Text="Sort" />
                             </StackLayout>
                             </buttons:SfButton.Content>
                             </buttons:SfButton>
                             </StackLayout>
                             </ScrollView>
                             </Grid>

                        -->
                        <!--<StackLayout Spacing="0">
                             <StackLayout Spacing="0" IsVisible="false" x:Name="Test" WidthRequest="500" />
                             <ScrollView HorizontalScrollBarVisibility="Never" VerticalScrollBarVisibility="Never" Orientation="Horizontal">
                             </ScrollView>
                             </StackLayout>-->
                        <!--
                             </DataTemplate>
                             </syncfusion:SfListView.HeaderTemplate>-->

                        <syncfusion:SfListView.GroupHeaderTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <ViewCell.View>
                                        <Grid Margin="0"
                                              Padding="0">

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="{OnIdiom Desktop=1*, Tablet=1*, Phone=1}" />
                                                <ColumnDefinition Width="{OnIdiom Desktop=3*, Tablet=4*, Phone=*}" />
                                                <ColumnDefinition Width="{OnIdiom Desktop=1*, Tablet=1*, Phone=1}" />
                                            </Grid.ColumnDefinitions>

                                            <StackLayout Grid.Column="1"
                                                         Padding="10,10,0,0">
                                                <iconize:IconImage HeightRequest="20"
                                                                   HorizontalOptions="StartAndExpand"
                                                                   Icon="{StaticResource DateIcon}"
                                                                   IconColor="Gray"
                                                                   VerticalOptions="Center"
                                                                   WidthRequest="20" />
                                            </StackLayout>
                                            <StackLayout Grid.Column="1"
                                                         Padding="40,10,0,0">
                                                <Label FontAttributes="Bold"
                                                       FontFamily="{DynamicResource Medium}"
                                                       FontSize="Small"
                                                       HorizontalOptions="StartAndExpand"
                                                       Text="{Binding Key}"
                                                       TextColor="{DynamicResource Warning}"
                                                       VerticalOptions="Center" />
                                            </StackLayout>
                                        </Grid>
                                    </ViewCell.View>
                                </ViewCell>
                            </DataTemplate>
                        </syncfusion:SfListView.GroupHeaderTemplate>

                        <syncfusion:SfListView.ItemTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <ViewCell.View>
                                        <Grid Margin="0"
                                              Padding="0">

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="{OnIdiom Desktop=1*, Tablet=1*, Phone=1}" />
                                                <ColumnDefinition Width="{OnIdiom Desktop=3*, Tablet=4*, Phone=*}" />
                                                <ColumnDefinition Width="{OnIdiom Desktop=1*, Tablet=1*, Phone=1}" />
                                            </Grid.ColumnDefinitions>

                                            <template:MyApprovalTemplate Grid.Column="1"
                                                                         BindingContext="{Binding .}" />
                                        </Grid>
                                    </ViewCell.View>
                                </ViewCell>
                            </DataTemplate>
                        </syncfusion:SfListView.ItemTemplate>
                    </syncfusion:SfListView>
                </Grid>
            </AbsoluteLayout>
        </StackLayout>
    </Grid>
</ContentPage>