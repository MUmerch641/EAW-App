<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://xamarin.com/schemas/2014/forms/design"
             xmlns:converter="clr-namespace:EatWork.Mobile.Utils"
             xmlns:iconize="clr-namespace:Plugin.Iconize;assembly=Plugin.Iconize"
             xmlns:syncfusion="clr-namespace:Syncfusion.ListView.XForms;assembly=Syncfusion.SfListView.XForms"
             xmlns:busyindicator="clr-namespace:Syncfusion.SfBusyIndicator.XForms;assembly=Syncfusion.SfBusyIndicator.XForms"
             xmlns:buttons="clr-namespace:Syncfusion.XForms.Buttons;assembly=Syncfusion.Buttons.XForms"
             xmlns:ios="clr-namespace:Xamarin.Forms.PlatformConfiguration.iOSSpecific;assembly=Xamarin.Forms.Core"
             mc:Ignorable="d"
             Title="Documents"
             ios:Page.UseSafeArea="true"
             x:Class="EatWork.Mobile.Views.Requests.DocumentRequest.DocumentListpage">

    <ContentPage.Resources>
        <ResourceDictionary>
            <Style x:Key="btnStyle" TargetType="buttons:SfButton">
                <Setter Property="CornerRadius" Value="3" />
                <Setter Property="BackgroundColor" Value="White" />
                <Setter Property="BorderColor" Value="Black" />
                <Setter Property="BorderWidth" Value="0.5" />
                <Setter Property="WidthRequest" Value="1000" />
                <Setter Property="HeightRequest" Value="45" />
                <Setter Property="VerticalOptions" Value="EndAndExpand" />
            </Style>

            <Style x:Key="SeparatorStyle" TargetType="BoxView">
                <Setter Property="HeightRequest" Value="1" />
                <Setter Property="BackgroundColor" Value="{DynamicResource Gray-200}" />
            </Style>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../../Shared/ListHeaderPage.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ContentPage.ToolbarItems>
        <iconize:IconToolbarItem Icon="md-close" Command="{Binding CloseModalCommand}" Priority="0" IconColor="{StaticResource IconizeToolbarItemColor}" />
    </ContentPage.ToolbarItems>

    <!--<ScrollView HorizontalScrollBarVisibility="Never" VerticalScrollBarVisibility="Never">-->
    <AbsoluteLayout>

        <busyindicator:SfBusyIndicator x:Name="busyindicator"
                                       Style="{StaticResource BusyIndicatorStyle}"
                                       IsBusy="{Binding IsBusy}" />

        <Grid AbsoluteLayout.LayoutFlags="All"
              AbsoluteLayout.LayoutBounds="0,0,1,1"
              IsVisible="{Binding IsBusy, Converter={converter:InverseBoolConverter}}"
              HorizontalOptions="FillAndExpand"
              VerticalOptions="FillAndExpand">
            <Grid.RowDefinitions>
                <!--<RowDefinition Height="60" />-->
                <!--<RowDefinition Height="45" />-->
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <StackLayout Grid.Row="0" Margin="10,10" Spacing="0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="80" />
                    </Grid.ColumnDefinitions>

                    <Label Text="Documents" HorizontalOptions="Start"
                           FontSize="20"
                           FontFamily="{DynamicResource Bold}"
                           TextColor="{DynamicResource Gray-900}"
                           Grid.Column="0" />

                    <buttons:SfButton x:Name="SkipButton"
                                      Grid.Column="1"
                                      BackgroundColor="Transparent"
                                      Command="{Binding CloseModalCommand}"
                                      CornerRadius="20"
                                      FontFamily="{DynamicResource SemiBold}"
                                      HeightRequest="40"
                                      HorizontalOptions="End"
                                      Text="Close"
                                      TextColor="{x:StaticResource HyperLink}"
                                      VerticalOptions="StartAndExpand"
                                      WidthRequest="80" />
                </Grid>

                <Grid RowSpacing="0" ColumnSpacing="0" Margin="0,10,0,0">

                    <!--<shared:NoItemsPartialPage DetailsText="No items available to display."
                         IsVisible="{Binding ShowList, Converter={converter:InverseBoolConverter }}"
                         HorizontalOptions="CenterAndExpand"
                         VerticalOptions="CenterAndExpand" />

                         <shared:NoItemsPartialPage DetailsText="Please try again with different keywords/criteria."
                         TitleText="No Result Found"
                         IsVisible="{Binding NoItems}"
                         HorizontalOptions="CenterAndExpand"
                         VerticalOptions="CenterAndExpand" />-->

                    <syncfusion:SfListView x:Name="DocumentsList"
                                           ItemsSource="{Binding DocumentsList}"
                                           ItemSize="70"
                                           SelectionMode="None"
                                           LoadMoreOption="AutoOnScroll"
                                           HeaderTemplate="{StaticResource CatalogDefaultHeaderTemplate}"
                                           HeaderSize="50"
                                           ItemSpacing="0,0,0,1">
                        <syncfusion:SfListView.ItemTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <ViewCell.View>
                                        <StackLayout Spacing="0">
                                            <Grid RowSpacing="0" ColumnSpacing="0" HeightRequest="80">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="50" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="50" />
                                                </Grid.ColumnDefinitions>

                                                <iconize:IconLabel Grid.RowSpan="3"
                                                                   Grid.Column="0"
                                                                   Margin="17,0"
                                                                   TextColor="{DynamicResource Gray-600}"
                                                                   VerticalOptions="CenterAndExpand"
                                                                   Text="{StaticResource NewNotifIcon}"
                                                                   FontSize="10" />

                                                <Label Grid.Column="1"
                                                       Grid.ColumnSpan="2"
                                                       Margin="0,10"
                                                       Text="{Binding Value}"
                                                       TextColor="{DynamicResource Gray-900}"
                                                       FontSize="16"
                                                       FontFamily="{DynamicResource Medium}"
                                                       HeightRequest="24"
                                                       HorizontalOptions="FillAndExpand"
                                                       LineBreakMode="TailTruncation" />

                                                <iconize:IconButton Grid.Column="3"
                                                                    Grid.RowSpan="3"
                                                                    TextColor="{DynamicResource Gray-600}"
                                                                    BackgroundColor="{DynamicResource Transparent}"
                                                                    Command="{Binding Path=BindingContext.SelectedDocumentCommand, Source={x:Reference DocumentsList}}"
                                                                    CommandParameter="{Binding .}"
                                                                    HorizontalOptions="End"
                                                                    VerticalOptions="Center"
                                                                    FontSize="25"
                                                                    WidthRequest="50"
                                                                    HeightRequest="50"
                                                                    Text="{StaticResource AddIcon}" />
                                                <!-- Seperator -->
                                                <BoxView Grid.Row="2" Grid.ColumnSpan="4" Style="{DynamicResource SeparatorStyle}" />
                                            </Grid>
                                        </StackLayout>
                                    </ViewCell.View>
                                </ViewCell>
                            </DataTemplate>
                        </syncfusion:SfListView.ItemTemplate>
                    </syncfusion:SfListView>
                </Grid>
            </StackLayout>
        </Grid>
    </AbsoluteLayout>
    <!--</ScrollView>-->
</ContentPage>