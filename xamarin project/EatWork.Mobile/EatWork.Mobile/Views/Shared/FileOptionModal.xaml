<?xml version="1.0" encoding="utf-8" ?>
<utils:FormModal xmlns="http://xamarin.com/schemas/2014/forms"
                 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                 xmlns:utils="clr-namespace:EatWork.Mobile.Utils"
                 xmlns:iconize="clr-namespace:Plugin.Iconize;assembly=Plugin.Iconize"
                 x:Class="EatWork.Mobile.Views.Shared.FileOptionModal">

    <utils:FormModal.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </utils:FormModal.Resources>

    <utils:FormModal.Header>
        <Grid ColumnSpacing="0"
              BackgroundColor="{DynamicResource PrimaryColor}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="50" />
            </Grid.ColumnDefinitions>

            <Label Text="Choose option"
                   Grid.Column="0"
                   Style="{DynamicResource ModalPageTitleStyle}" />

            <iconize:IconLabel Grid.Column="1"
                               Style="{DynamicResource IconizeIconStyle}"
                               Text="{DynamicResource CloseIcon}"
                               TextColor="{DynamicResource Gray-White}"
                               Padding="15,10,0,10"
                               FontSize="Large">
                <iconize:IconLabel.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding CloseModalCommand}" />
                </iconize:IconLabel.GestureRecognizers>
            </iconize:IconLabel>
        </Grid>
    </utils:FormModal.Header>

    <utils:FormModal.Body>
        <StackLayout Grid.Row="1"
                     BindableLayout.ItemsSource="{Binding Options}"
                     Spacing="20"
                     x:Name="OptionsList">
            <BindableLayout.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="20,0,10,0" Margin="1">
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding Path=BindingContext.SelectedOptionCommand,Source={x:Reference OptionsList}}"
                                                  CommandParameter="{Binding .}" />
                        </Grid.GestureRecognizers>
                        <StackLayout>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30" />
                                    <ColumnDefinition Width="5" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <StackLayout Grid.Column="0">
                                    <iconize:IconImage Icon="{Binding Icon}"
                                                       WidthRequest="20"
                                                       HeightRequest="20"
                                                       IconColor="{DynamicResource PrimaryColor}"
                                                       HorizontalOptions="StartAndExpand"
                                                       VerticalOptions="CenterAndExpand" />
                                </StackLayout>
                                <StackLayout Grid.Column="2">
                                    <Label Text="{Binding DisplayText}"
                                           LineBreakMode="NoWrap"
                                           FontSize="16"
                                           FontFamily="{DynamicResource Medium}"
                                           HorizontalOptions="StartAndExpand"
                                           VerticalOptions="CenterAndExpand"
                                           TextColor="{StaticResource Gray-800}" />
                                </StackLayout>
                            </Grid>
                        </StackLayout>
                    </Grid>
                </DataTemplate>
            </BindableLayout.ItemTemplate>
        </StackLayout>
    </utils:FormModal.Body>
</utils:FormModal>